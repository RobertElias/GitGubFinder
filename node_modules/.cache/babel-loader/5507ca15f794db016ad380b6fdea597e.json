{"ast":null,"code":"import _regeneratorRuntime from\"/Users/robertelias/Desktop/GitHubFinder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/Users/robertelias/Desktop/GitHubFinder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{CLEAR_USERS,GET_REPOS,GET_USER,SEARCH_USERS,SET_LOADING}from'../types';import React,{useReducer}from'react';import GithubContext from'./githubContext';import githubReducer from'./githubReducer';import axios from'axios';var githubClientId;var githubClientSecret;if(process.env.NODE_ENV!=='production'){githubClientId=process.env.REACT_APP_GITHUB_CLIENT_ID;githubClientSecret=process.env.REACT_APP_GITHUB_CLIENT_SECRET;}else{githubClientId=process.env.GITHUB_CLIENT_ID;githubClientSecret=process.env.GITHUB_CLIENT_SECRET;}var GithubState=function GithubState(props){var initialState={users:[],user:{},repos:[],loading:false};var _useReducer=useReducer(githubReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];// Search Users\nvar searchUsers=function searchUsers(text){var res;return _regeneratorRuntime.async(function searchUsers$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading();_context.next=3;return _regeneratorRuntime.awrap(axios.get(\"https://api.github.com/search/users?q=\".concat(text,\"&client_id=\").concat(process.env.githubClientId,\"&client_secret=\").concat(process.env.githubClientSecret)));case 3:res=_context.sent;dispatch({type:SEARCH_USERS,payload:res.data.items});case 5:case\"end\":return _context.stop();}}});};// Get Users\nvar getUser=function getUser(username){var res;return _regeneratorRuntime.async(function getUser$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);console.log(username);_context2.next=4;return _regeneratorRuntime.awrap(axios.get(\"https://api.github.com/users/\".concat(username,\"?client_id=\").concat(process.env.githubClientId,\"&client_secret=\").concat(process.env.githubClientSecret)));case 4:res=_context2.sent;dispatch({type:GET_USER,payload:res.data});case 6:case\"end\":return _context2.stop();}}});};// Get Repos\n// get users repos\nvar getUserRepos=function getUserRepos(username){var res;return _regeneratorRuntime.async(function getUserRepos$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoading(true);console.log(username);_context3.next=4;return _regeneratorRuntime.awrap(axios.get(\"https://api.github.com/users/\".concat(username,\"/repos?per_page=5&sort=created:asc&client_id=\").concat(process.env.githubClientId,\"&client_secret=\").concat(process.env.githubClientSecret)));case 4:res=_context3.sent;dispatch({type:GET_REPOS,payload:res.data});case 6:case\"end\":return _context3.stop();}}});};// Clear Users\nvar clearUsers=function clearUsers(){return dispatch({type:CLEAR_USERS});};// Set Loading\nvar setLoading=function setLoading(){return dispatch({type:SET_LOADING});};return React.createElement(GithubContext.Provider,{value:{users:state.users,user:state.user,repos:state.repos,loading:state.loading,searchUsers:searchUsers,clearUsers:clearUsers,getUser:getUser,getUserRepos:getUserRepos}},props.children);};export default GithubState;","map":{"version":3,"sources":["/Users/robertelias/Desktop/GitHubFinder/src/context/github/GithubState.js"],"names":["CLEAR_USERS","GET_REPOS","GET_USER","SEARCH_USERS","SET_LOADING","React","useReducer","GithubContext","githubReducer","axios","githubClientId","githubClientSecret","process","env","NODE_ENV","REACT_APP_GITHUB_CLIENT_ID","REACT_APP_GITHUB_CLIENT_SECRET","GITHUB_CLIENT_ID","GITHUB_CLIENT_SECRET","GithubState","props","initialState","users","user","repos","loading","state","dispatch","searchUsers","text","setLoading","get","res","type","payload","data","items","getUser","username","console","log","getUserRepos","clearUsers","children"],"mappings":"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","sourcesContent":["import {\r\n  CLEAR_USERS,\r\n  GET_REPOS,\r\n  GET_USER,\r\n  SEARCH_USERS,\r\n  SET_LOADING\r\n} from '../types';\r\nimport React, { useReducer } from 'react';\r\n\r\nimport GithubContext from './githubContext';\r\nimport githubReducer from './githubReducer';\r\nimport axios from 'axios';\r\n\r\nlet githubClientId;\r\nlet githubClientSecret;\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n  githubClientId = process.env.REACT_APP_GITHUB_CLIENT_ID;\r\n  githubClientSecret = process.env.REACT_APP_GITHUB_CLIENT_SECRET;\r\n} else {\r\n  githubClientId = process.env.GITHUB_CLIENT_ID;\r\n  githubClientSecret = process.env.GITHUB_CLIENT_SECRET;\r\n}\r\n\r\nconst GithubState = props => {\r\n  const initialState = {\r\n    users: [],\r\n    user: {},\r\n    repos: [],\r\n    loading: false\r\n  };\r\n  const [state, dispatch] = useReducer(githubReducer, initialState);\r\n\r\n  // Search Users\r\n  const searchUsers = async text => {\r\n    setLoading();\r\n    const res = await axios.get(\r\n      `https://api.github.com/search/users?q=${text}&client_id=${process.env.githubClientId}&client_secret=${process.env.githubClientSecret}`\r\n    );\r\n    dispatch({ type: SEARCH_USERS, payload: res.data.items });\r\n  };\r\n\r\n  // Get Users\r\n\r\n  const getUser = async username => {\r\n    setLoading(true);\r\n    console.log(username);\r\n    const res = await axios.get(\r\n      `https://api.github.com/users/${username}?client_id=${process.env.githubClientId}&client_secret=${process.env.githubClientSecret}`\r\n    );\r\n\r\n    dispatch({ type: GET_USER, payload: res.data });\r\n  };\r\n\r\n  // Get Repos\r\n  // get users repos\r\n  const getUserRepos = async username => {\r\n    setLoading(true);\r\n    console.log(username);\r\n    const res = await axios.get(\r\n      `https://api.github.com/users/${username}/repos?per_page=5&sort=created:asc&client_id=${process.env.githubClientId}&client_secret=${process.env.githubClientSecret}`\r\n    );\r\n\r\n    dispatch({ type: GET_REPOS, payload: res.data });\r\n  };\r\n\r\n  // Clear Users\r\n  const clearUsers = () => dispatch({ type: CLEAR_USERS });\r\n\r\n  // Set Loading\r\n  const setLoading = () => dispatch({ type: SET_LOADING });\r\n\r\n  return (\r\n    <GithubContext.Provider\r\n      value={{\r\n        users: state.users,\r\n        user: state.user,\r\n        repos: state.repos,\r\n        loading: state.loading,\r\n        searchUsers,\r\n        clearUsers,\r\n        getUser,\r\n        getUserRepos\r\n      }}\r\n    >\r\n      {props.children}\r\n    </GithubContext.Provider>\r\n  );\r\n};\r\n\r\nexport default GithubState;\r\n"]},"metadata":{},"sourceType":"module"}